:root{
  --bg:#f4f5f7; --glass-bg: rgba(255,255,255,0.32);
  --accent:#007aff; --muted:#8b8b94;
  --card-radius:14px; --glass-blur:14px;
  --shadow:0 8px 30px rgba(16,24,40,0.08);
}

*{box-sizing:border-box; margin:0; padding:0;}
html,body{height:100%; overflow:hidden;}

body{
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial;
  background:var(--tg-theme-bg-color, linear-gradient(180deg,#e8eaed,#fff));
  -webkit-font-smoothing:antialiased;
  color:var(--tg-theme-text-color, #111);
  display:flex; flex-direction:column;
  height:100vh;
  padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
}

.ui-root{
  width:100%; max-width:760px; margin:0 auto; 
  padding:16px; display:flex; flex-direction:column; 
  height:100%; overflow-y:auto;
}

/* Liquid glass base */
.glass{
  position:relative;
  backdrop-filter:blur(var(--glass-blur)) saturate(160%);
  -webkit-backdrop-filter:blur(var(--glass-blur)) saturate(160%);
  background:var(--tg-theme-secondary-bg-color, var(--glass-bg));
  border-radius:var(--card-radius);
  border:1px solid var(--tg-theme-hint-color, rgba(255,255,255,0.22));
  overflow:hidden;
  transform:translateZ(0);
}

.glass::before{
  content:"";
  position:absolute; inset:0;
  background:radial-gradient(circle at 30% 10%,rgba(255,255,255,0.6),transparent 40%),
             radial-gradient(circle at 70% 90%,rgba(255,255,255,0.25),transparent 40%);
  mix-blend-mode:overlay;
  opacity:.6;
  animation:liquidShift 8s infinite ease-in-out alternate;
}

@keyframes liquidShift{
  0%{transform:translate(-5%,-5%) scale(1.04)}
  50%{transform:translate(3%,3%) scale(1.08)}
  100%{transform:translate(0,0) scale(1.04)}
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  .glass::before { animation: none; }
  .card { transition: none; }
}

/* Elements */
.topbar{
  display:flex; align-items:center; justify-content:space-between;
  padding:12px 16px; margin-bottom:16px;
  box-shadow:0 6px 20px rgba(0,0,0,0.05);
}

.logo{
  width:44px; height:44px; border-radius:12px;
  background:#fff; display:flex; align-items:center;
  justify-content:center; font-size:22px;
}

.title .app-name{font-weight:700; font-size:16px;}
.title .subtitle{font-size:12px; color:var(--muted); margin-top:2px;}

.icon-btn{
  background:transparent; border:none; font-size:20px;
  padding:8px; border-radius:8px; cursor:pointer;
  min-width:44px; min-height:44px;
  color:var(--tg-theme-text-color, #111);
}

.hero{
  padding:24px; text-align:left; box-shadow:var(--shadow);
  margin-bottom:16px;
}

.hero-title{margin:0 0 8px; font-size:22px; font-weight:700;}
.hero-sub{margin:0 0 16px; color:var(--muted); line-height:1.4;}
.hero-actions{display:flex; gap:12px; flex-wrap:wrap;}

.btn-primary{
  background:var(--tg-theme-button-color, var(--accent));
  color:var(--tg-theme-button-text-color, #fff);
  border:none; padding:12px 18px; border-radius:12px;
  font-weight:600; cursor:pointer; 
  box-shadow:0 6px 18px rgba(0,122,255,0.18);
  min-height:44px; touch-action:manipulation;
  transition:transform 0.2s, box-shadow 0.2s;
}

.btn-primary:active{transform:scale(0.98);}

.btn-ghost{
  background:transparent; border:1px solid var(--tg-theme-hint-color, rgba(0,0,0,0.08));
  padding:10px 14px; border-radius:12px; cursor:pointer;
  color:var(--tg-theme-text-color, #111); min-height:44px;
  touch-action:manipulation;
}

/* Categories & Cards */
.category-bar{
  display:flex; gap:8px; overflow-x:auto; padding:8px 0;
  margin-bottom:16px; -webkit-overflow-scrolling:touch;
  scrollbar-width:none;
}

.category-bar::-webkit-scrollbar{display:none;}

.cat-btn{
  border:1px solid var(--tg-theme-hint-color, rgba(0,0,0,0.08));
  padding:10px 16px; border-radius:999px; background:transparent;
  white-space:nowrap; cursor:pointer; color:var(--tg-theme-text-color, #111);
  min-height:44px; touch-action:manipulation; flex-shrink:0;
}

.cat-btn.active{
  background:var(--tg-theme-button-color, var(--accent));
  color:var(--tg-theme-button-text-color, #fff);
  border-color:transparent; box-shadow:0 6px 18px rgba(0,122,255,0.12);
}

.cards-area{
  display:grid; grid-template-columns:1fr; gap:16px;
  flex:1; margin-bottom:16px;
}

@media(min-width:720px){
  .cards-area{grid-template-columns:repeat(2,1fr);}
}

.card{
  background:var(--tg-theme-secondary-bg-color, var(--glass-bg));
  border-radius:var(--card-radius); box-shadow:var(--shadow);
  display:flex; flex-direction:column; gap:12px; padding:16px;
  overflow:hidden; position:relative;
  transition:transform .22s, box-shadow .22s;
  backdrop-filter:blur(var(--glass-blur)) saturate(180%);
  -webkit-backdrop-filter:blur(var(--glass-blur)) saturate(180%);
  cursor:pointer;
}

.card:hover{transform:translateY(-4px); box-shadow:0 12px 30px rgba(0,0,0,0.12);}

.card .thumb{
  width:100%; aspect-ratio:1/1; border-radius:12px;
  object-fit:cover; object-position:center;
  background:var(--tg-theme-hint-color, #eee);
}

.card h3{margin:0; font-size:16px; font-weight:600; line-height:1.3;}
.card p{margin:0; color:var(--muted); font-size:14px; line-height:1.4;}

.card-actions{
  display:flex; justify-content:flex-end; gap:8px;
  margin-top:auto; padding-top:8px;
}

/* Modal */
.modal{
  position:fixed; inset:0; display:flex; align-items:center;
  justify-content:center; padding:20px; z-index:1000;
  background:var(--tg-theme-bg-color, rgba(0,0,0,0.32));
  backdrop-filter:blur(8px); -webkit-backdrop-filter:blur(8px);
}

.modal.hidden{display:none;}

.modal .modal-card{
  width:100%; max-width:500px; border-radius:20px;
  padding:24px; box-shadow:0 18px 50px rgba(16,24,40,0.18);
  position:relative; max-height:80vh; overflow-y:auto;
}

.close-btn{
  position:absolute; right:16px; top:16px; border:none;
  background:transparent; font-size:20px; cursor:pointer;
  width:32px; height:32px; border-radius:50%;
  display:flex; align-items:center; justify-content:center;
  color:var(--tg-theme-text-color, #111);
  z-index:10;
}

.modal .thumb{
  width:100%; height:200px; border-radius:12px;
  object-fit:cover; margin-bottom:16px;
}

#modalDesc{
  line-height:1.5;
}

#modalDesc p{
  margin-bottom:12px;
}

.fact-highlight{
  margin-top:16px; padding:16px; 
  background:var(--tg-theme-button-color, rgba(0,122,255,0.08));
  border-radius:12px; border-left:4px solid var(--tg-theme-button-color, #007aff);
}

.footer{
  margin-top:auto; padding:16px; border-radius:12px;
  text-align:center; color:var(--muted); font-size:12px;
}

.hidden{display:none;}

/* Loading states */
.loading{opacity:0.6; pointer-events:none;}
.spinner{animation:spin 1s linear infinite;}
@keyframes spin{100%{transform:rotate(360deg);}}